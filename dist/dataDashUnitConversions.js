!function(a){var b={mm:[1,"measure"],km:[1e5,"measure"],m:[1e3,"measure"],cm:[10,"measure"],"in":[25.4,"measure"],f:[304.8,"measure"],y:[914.4,"measure"],mi:[1609344,"measure"],g:[1,"weight"],oz:[28.3495,"weight"],lbs:[453.592,"weight"],kg:[1e3,"weight"],ton:[907185,"weight"],tonne:[1e6,"weight"]},c=function(a,c,d,e){c=c.toLowerCase(),d=d.toLowerCase(),a=parseFloat(a);var f=b[c][0],g=b[c][1];a=e?a/f:a*f,f=b[d][0];var h=b[d][1];if(g!=h)throw c+" and "+d+" are incompatible units of measure";return e?a*f:a/f},d=function(a,b){if(b=b.toLowerCase(),"us"===b)switch(a){case"mm":return"in";case"cm":return"in";case"m":return"f";case"km":return"mi";case"g":return"oz";case"kg":return"lbs";case"tonne":return"ton"}else if("metric"===b)switch(a){case"in":return"cm";case"f":return"m";case"y":return"m";case"mi":return"kg";case"oz":return"g";case"lbs":return"kg";case"ton":return"tonne"}return a},e=function(){$(this).attr($.dataDash.prefix+"prevUnit",$.dataDash(this).attr($.dataDash.prefix+"unit")),onUnitFamilyChange=function(a,b){var e=parseFloat($.dataDash(this).getValOrHtml()),f=$.dataDash(this).attr($.dataDash.prefix+"unit"),g=$(this).attr($.dataDash.prefix+"prevUnit");unitOut=g&&d(g,b)==g?g:d(f,b);var h="undefined"!=typeof $(this).attr($.dataDash.prefix+"perUnit");f!=unitOut&&($.dataDash(this).setValOrHtml(c(e,f,unitOut,h)),$.dataDash(this).attr($.dataDash.prefix+"unit",unitOut),$(this).trigger("change"))},$(this).bind("unitFamilyChange",onUnitFamilyChange)},f=function(a,b){b=b&&b.toLowerCase();var c={mm:"in",millimeters:"inches",millimeter:"inch",millimetre:"inches",millimetres:"inches",cm:"in",centimeters:"inches",centimeter:"inch",centimetre:"inches",centimetres:"inches",m:"f",meters:"feet",meter:"foot",metre:"foot",metres:"feet",gram:"ounce",grams:"ounces",g:"oz",kg:"lbs",kilogram:"pound",kilograms:"pounds",tonne:"ton",tonnes:"tons"},d={"in":"cm",inch:"centimeter",inches:"centimeters",f:"m",feet:"meters",foot:"meter",lbs:"kg",lb:"kg",pounds:"kilograms",pound:"kilogram",ton:"tonne",tons:"tonnes"};return"us"==b?c[a]||a:"us"==b?d[a]||a:c[a]||d[a]||a},g=function(){$(this).attr($.dataDash.prefix+"prevUnit",$.dataDash(this).getValOrHtml());var a=function(a,b){var c=$.dataDash(this).getValOrHtml(),d=$(this).attr($.dataDash.prefix+"prevUnit");$.dataDash(this).setValOrHtml(f(d)==c?d:f(c,b))};$(this).bind("unitFamilyChange",a)};a.registerBehavior("unit",e),a.registerBehavior("unitLabel",g),a.registerBehavior("perUnit"),a.registerBehavior("prevUnit")}($.dataDash);